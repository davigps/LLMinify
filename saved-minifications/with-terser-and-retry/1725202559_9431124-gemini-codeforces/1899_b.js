function getDivisors(n){var d=[];for(var i=1;i<=Math.sqrt(n);++i){if(n%i===0){d.push(i);if(i!==n/i){d.push(n/i)}}}return d}function process(){var n=parseInt(readline().trim());var v=readline().trim().split(" ").map((function(value){return parseInt(value)}));var p=[v[0]];for(var i=1;i<n;++i){p[i]=p[i-1]+v[i]}var d=getDivisors(n);var a=0;for(var i=0;i<d.length;++i){var l=d[i];var m=Number.MAX_VALUE;var x=-Number.MAX_VALUE;for(var j=l-1;j<n;j+=l){var t=p[j]-(j-l>=0?p[j-l]:0);m=Math.min(m,t);x=Math.max(x,t)}a=Math.max(a,x-m)}print(a)}var t=parseInt(readline().trim());while(t--){process()}
