function getDivisors(n){var d=[],i;for(i=1;i<=Math.sqrt(n);++i)n%i===0&&(d.push(i),i!==n/i&&d.push(n/i));return d}function process(){var n=parseInt(readline().trim()),v=readline().trim().split(" ").map((function(v){return parseInt(v)})),p=[v[0]],i,d=getDivisors(n),a=0,j,t,m,x;for(i=1;i<n;++i)p[i]=p[i-1]+v[i];for(i=0;i<d.length;++i){m=Number.MAX_VALUE;x=-Number.MAX_VALUE;for(j=d[i]-1;j<n;j+=d[i])t=p[j]-(j-d[i]>=0?p[j-d[i]]:0),m=Math.min(m,t),x=Math.max(x,t);a=Math.max(a,x-m)}print(a)}for(var t=parseInt(readline().trim());t--;)process();
