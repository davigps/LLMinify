function getDivisors(n){var a=[];for(var i=1;i<=Math.sqrt(n);++i){if(n%i===0){a.push(i);if(i!==n/i){a.push(n/i)}}}return a}function process(){var n=parseInt(readline().trim());var v=readline().trim().split(" ").map((function(e){return parseInt(e)}));var p=[v[0]];for(var i=1;i<n;++i){p[i]=p[i-1]+v[i]}var d=getDivisors(n),a=0;for(var i=0;i<d.length;++i){var t=d[i],m=Number.MAX_VALUE,x=-Number.MAX_VALUE;for(var j=t-1;j<n;j+=t){var h=p[j]-(j-t>=0?p[j-t]:0);m=Math.min(m,h);x=Math.max(x,h)}a=Math.max(a,x-m)}print(a)}var t=parseInt(readline().trim());while(t--)process();
