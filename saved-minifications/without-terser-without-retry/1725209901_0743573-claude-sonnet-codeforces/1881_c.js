"use strict";function readNumber(){return parseInt(readline())}function readArray(c){return readline().split(" ").map(c||parseInt)}function isSorted(r){return r.every((v,i,a)=>!i||a[i-1]<=v)}for(let t=readNumber();t--;)solve();function solve(){const n=readNumber(),a=[];for(let i=0;i<n;++i)a.push(readline().split(""));let c=0;for(let i=0;i<n/2;++i)for(let j=0;j<n/2;++j){const[w,x,y,z]=[a[i][j],a[j][n-i-1],a[n-i-1][n-j-1],a[n-j-1][i]].map(c=>c.charCodeAt(0)).sort((a,b)=>a-b);c+=3*z-w-x-y}print(c)}
