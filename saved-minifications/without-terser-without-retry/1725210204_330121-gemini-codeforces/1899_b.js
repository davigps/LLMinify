function getDivisors(n){var d=[];for(var i=1;i<=Math.sqrt(n);++i){if(n%i===0){d.push(i);if(i!==n/i){d.push(n/i)}}}return d}function process(){var n=parseInt(readline().trim()),v=readline().trim().split(' ').map(function(v){return parseInt(v)}),p=[v[0]];for(var i=1;i<n;++i){p[i]=p[i-1]+v[i]}var d=getDivisors(n),a=0;for(var i=0;i<d.length;++i){var d=d[i],m=Number.MAX_VALUE,x=-Number.MAX_VALUE;for(var j=d-1;j<n;j+=d){var t=p[j]-((j-d>=0)?p[j-d]:0);m=Math.min(m,t);x=Math.max(x,t)}a=Math.max(a,x-m)}print(a)}var t=parseInt(readline().trim());while(t--){process()}
